<launch>
    <arg name="group" default="arm"/>
    <arg name="arm" default="gen3"/>
    <arg name="gripper" default="robotiq_2f_85"/>
    <arg name="prefix" default="arm_"/>
    <arg name="ip_address" default="192.168.5.111"/>
    <arg name="start_rviz" default="false"/>
    <arg name="local_joystick" default="true"/>
    <group ns="$(arg group)">
        <include file="$(find kortex_driver)/launch/kortex_arm_driver.launch">
            <arg name="arm" value="$(arg arm)"/>
            <arg name="gripper" value="$(arg gripper)"/>
            <arg name="prefix" value="$(arg prefix)"/>
            <arg name="ip_address" value="$(arg ip_address)"/>
            <!-- <arg name="start_rviz" value="$(arg start_rviz)"/> -->
        </include>
        
        <!--include file="$(find kinova_vision)/launch/kinova_vision.launch"/-->

        <node name="arm_control_marmotte" pkg="arm_control_marmotte" type="arm_control_node.py" output="screen">
            <param name="group_name" value="$(arg group)"/>
            <param name="cartesian_speed_ratio" value="0.3"/>
            <param name="joint_speed_ratio" value="0.5"/>
        </node>
        <!-- Start joint and robot state publisher -->
        <param name="robot_description" command="$(find xacro)/xacro --inorder $(find kortex_description)/robots/$(arg arm)_$(arg gripper).xacro dof:=7 vision:=true sim:=false"/>
       
        <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher">
            <rosparam param="source_list">[base_feedback/joint_state]</rosparam>
            <param name="rate" value="10" />
        </node>
        <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" />
    </group>
    <node if="$(arg local_joystick)" pkg="joy" type="joy_node" name="joy_arm" >
            <param name="deadzone" value="0.05" />
            <remap from="joy" to="joy_arm" />
    </node>
</launch>
